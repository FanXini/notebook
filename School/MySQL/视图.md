# <center>视图</center>

[TOC]

## 定义

&emsp;&emsp;视图是从一个或多个基本表(或视图)导出的表。它与基本表不同，是一个虚表。数据库中只存放视图的定义，而不存放视图对应的数据，这些数据仍存放在原理的基本表中。

&emsp;&emsp;视图就像一个窗口，透过它可以看到数据库中自己感兴趣的数据及其变化。

## 视图的基本语法

### 1.创建视图

```mysql
CREATE VIEW view_name 【(列名1，列名2...)】
AS <子查询>
【WITH CHECK OPTION】
```

### 2.删除视图

```mysql
DROP VIEW view_name
```

### 3.修改视图的逻辑

**使用CREATE OR REPLACE VIEW** 修改

```mysql
CREATE OR REPLACE VIEW view_name
AS <子查询>
```

**使用ALTER 语句修改**

```mysql
ALTER VIEW viewname
as <查询语句>
```

### 4.更新视图中的数据

&emsp;&emsp;更新视图的数据实际上还是转化成了更新基本表的数据。==注意，如果视图定义中加了WITH CHECK OPTION字句，那么更新视图时，系统会添加视图定义的条件==

**并不是所有对数据的更新都能通过视图完成**

```
1.若视图是由两个基本表导出的，则此视图不允许被更新
2.若视图的字段来自字段表达式或常数，则不允许对此视图执行INSERT和UPDATE操作，但允许执行DELETE操作。
3.若视图的字段有聚集函数，则不能更新
4.若视图定义中有GROUP BY字句，则此视图不允许更新
5.若视图定义中有DISTINCT短语，则此视图不允许更新
6.若视图中的嵌套查询，且子查询中FROM涉及到的表也是导出该视图的基本表，则不允许更新。
7.从不允许更新的视图导出来的表，也不允许更新。
```



## 视图的作用

1. **视图能简化用户的操作**

   > 定义了若干张表连接的视图，就将表与表之间的连接关系对用户隐蔽起来了，用户只需要对虚表进行最直接的查询操作便能得到自己想要的数据。

1. **视图使用户能以多种角度看待同一数据**

2. **视图对重构数据库提供了一定程度的逻辑独立性**

3. **视图能对机密数据提高安全保护**

   >不同的用户所需求的数据不相同，可以通过视图只将将用户需求的数据显示到对应用户面前。比如数据库基本表中有20个班的学生记录，可以定义20个视图，每个视图只包含一个班的数据，并只允许每个班的班主任查询和修改自己系的学生记录。

5. **适当的使用视图可以更清晰的表达查询**